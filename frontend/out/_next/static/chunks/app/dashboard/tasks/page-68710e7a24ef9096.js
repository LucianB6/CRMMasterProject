(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8948],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(95155),s=a(12115),n=a(17129),l=a(92885),o=a(64269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6259:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>d,_2:()=>c,lp:()=>u,mB:()=>f,rI:()=>o,ty:()=>i});var r=a(95155),s=a(12115),n=a(70692),l=a(64269);let o=n.bL,i=n.l9;n.YJ,n.ZL,n.Pb,n.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:o,...i}=e;return(0,r.jsx)(n.ZP,{ref:t,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...i,children:o})}).displayName=n.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.G5,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",a),...s})}).displayName=n.G5.displayName;let d=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:t,sideOffset:s,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",a),...o})})});d.displayName=n.UC.displayName;let c=s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...o})});c.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:o,...i}=e;return(0,r.jsx)(n.H_,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...i,children:s})}).displayName=n.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsx)(n.hN,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:s})}).displayName=n.hN.displayName;let u=s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...o})});u.displayName=n.JU.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-border",a),...s})});f.displayName=n.wv.displayName},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>f,eb:()=>g,gC:()=>x,l6:()=>c,yv:()=>u});var r=a(95155),s=a(12115),n=a(20154),l=a(24033),o=a(12108),i=a(5917),d=a(64269);let c=n.bL;n.YJ;let u=n.WT,f=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=n.l9.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});m.displayName=n.PP.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[(0,r.jsx)(m,{}),(0,r.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});x.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});g.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.wv.displayName},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(95155);a(12115);var s=a(92885),n=a(64269);let l=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},15894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(12115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=[],i={toasts:[]};function d(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),o.forEach(e=>{e(i)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(i);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var r=a(95155),s=a(12115),n=a(64269);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});l.displayName="Textarea"},41052:(e,t,a)=>{"use strict";a.d(t,{C5:()=>y,MJ:()=>g,Rr:()=>h,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>u});var r=a(95155),s=a(12115),n=a(17129),l=a(22544),o=a(64269),i=a(76444);let d=l.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(l.xI,{...t})})},f=()=>{let e=s.useContext(c),t=s.useContext(m),{getFieldState:a,formState:r}=(0,l.xW)(),n=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},m=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:a,...n}=e,l=s.useId();return(0,r.jsx)(m.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",a),...n})})});p.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:n,formItemId:l}=f();return(0,r.jsx)(i.J,{ref:t,className:(0,o.cn)(n&&"text-destructive",a),htmlFor:l,...s})});x.displayName="FormLabel";let g=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:l,formDescriptionId:o,formMessageId:i}=f();return(0,r.jsx)(n.DX,{ref:t,id:l,"aria-describedby":s?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!s,...a})});g.displayName="FormControl";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:n}=f();return(0,r.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});h.displayName="FormDescription";let y=s.forwardRef((e,t)=>{var a;let{className:s,children:n,...l}=e,{error:i,formMessageId:d}=f(),c=i?String(null!=(a=null==i?void 0:i.message)?a:""):n;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",s),...l,children:c}):null});y.displayName="FormMessage"},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>p,L3:()=>x,c7:()=>m,lG:()=>i,rr:()=>g,zM:()=>d});var r=a(95155),s=a(12115),n=a(82969),l=a(65229),o=a(64269);let i=n.bL,d=n.l9,c=n.ZL;n.bm;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});x.displayName=n.hE.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=n.VY.displayName},58436:(e,t,a)=>{Promise.resolve().then(a.bind(a,97120))},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2821),s=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(95155),s=a(12115),n=a(64269);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var r=a(95155),s=a(12115),n=a(32894),l=a(64269);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none",a),...s})});o.displayName=n.b.displayName},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>o});var r=a(95155),s=a(12115),n=a(64269);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},90960:(e,t,a)=>{"use strict";a.d(t,{JR:()=>r,hD:()=>s,nr:()=>l,rP:()=>n});let r="http://localhost:8080";if(!r)throw Error("NEXT_PUBLIC_API_BASE_URL is not set.");class s extends Error{constructor(e,t,a){super(t),this.name="ApiError",this.status=e,this.body=a}}let n=async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("http://")||e.startsWith("https://")?e:new URL(e.startsWith("/")?e:"/".concat(e),r).toString(),n=new Headers(null!=(t=a.headers)?t:{});return a.body&&"string"==typeof a.body&&!n.has("Content-Type")&&n.set("Content-Type","application/json"),fetch(s,{...a,headers:n})},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await n(e,t),r=await a.text();if(!a.ok){var l;throw new s(a.status,(l=a.status,401===l?"Unauthorized (401). Please sign in.":403===l?"Forbidden (403).":404===l?"Not Found (404).":l>=500?"Server error. Please try again later.":r||"Request failed (status ".concat(l,").")),r)}return r?JSON.parse(r):null}},97120:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(95155),s=a(12115),n=a(6191);let l=(0,a(71847).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var o=a(16485),i=a(22544),d=a(66942),c=a(15653),u=a(3617),f=a(48633),m=a(3998),p=a(86948),x=a(51834),g=a(41052),h=a(65142),y=a(31120),b=a(11186),v=a(11647),N=a(15894),j=a(90960),w=a(6259),k=a(64269);let T=c.Ik({title:c.Yj().min(1,"Titlul este obligatoriu."),goal:c.Yj().optional(),deadline:c.au.date().optional(),status:c.k5(["todo","in-progress","done"]).default("todo")}),C={todo:{title:"De făcut"},"in-progress":{title:"\xcen progres"},done:{title:"Finalizat"}};function R(){let{toast:e}=(0,N.dj)(),[t,a]=(0,s.useState)([]),[l,o]=(0,s.useState)(!1),[c,f]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[R,E]=(0,s.useState)(null),[z,A]=(0,s.useState)(null),D=(0,s.useCallback)(()=>window.localStorage.getItem("salesway_token"),[]),I=(0,s.useCallback)(e=>{var t;return{id:e.id,title:e.title,goal:null!=(t=e.goal)?t:"",deadline:e.deadline?new Date(e.deadline):void 0,status:e.status}},[]),_=(0,i.mN)({resolver:(0,d.u)(T),defaultValues:{title:"",goal:"",deadline:void 0,status:"todo"}}),M=e=>{var t;f(e),_.reset({title:e.title,goal:null!=(t=e.goal)?t:"",deadline:e.deadline,status:e.status}),o(!0)},P=(0,s.useCallback)(async()=>{try{w(!0);let e=D(),t=await (0,j.nr)("/tasks/board",{headers:e?{Authorization:"Bearer ".concat(e)}:void 0});a(t.map(I))}catch(t){e({title:"Nu am putut \xeencărca task-urile",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}finally{w(!1)}},[D,I,e]);async function O(t){try{let r=D(),s=I(await (0,j.nr)("/tasks/board".concat(c?"/".concat(c.id):""),{method:c?"PUT":"POST",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}},body:JSON.stringify({title:t.title,goal:t.goal,deadline:t.deadline?(0,u.GP)(t.deadline,"yyyy-MM-dd"):null,status:t.status})}));a(e=>{let t=e.findIndex(e=>e.id===s.id);if(-1===t)return[s,...e];let a=[...e];return a[t]=s,a}),e({title:c?"Task actualizat!":"Task adăugat!",description:'Task-ul "'.concat(s.title,'" a fost ').concat(c?"modificat":"adăugat",".")}),o(!1),f(null)}catch(t){e({title:"Nu am putut salva task-ul",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}}let F=(0,s.useCallback)(async(t,r,s)=>{try{let e=D(),s=I(await (0,j.nr)("/tasks/board/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json",...e?{Authorization:"Bearer ".concat(e)}:{}},body:JSON.stringify({title:t.title,goal:t.goal||null,deadline:t.deadline?(0,u.GP)(t.deadline,"yyyy-MM-dd"):null,status:r})}));a(e=>e.map(e=>e.id===s.id?s:e))}catch(t){a(e=>e.map(e=>e.id===s.id?s:e)),e({title:"Nu am putut muta task-ul",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}},[D,I,e]),J=async t=>{try{let r=D();await (0,j.nr)("/tasks/board/".concat(t),{method:"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:void 0}),a(e=>e.filter(e=>e.id!==t)),e({title:"Task șters."})}catch(t){e({title:"Nu am putut șterge task-ul",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}},U=["todo","in-progress","done"];(0,s.useEffect)(()=>{P()},[P]);let B=(e,t)=>{E(e.id),t.dataTransfer.setData("text/plain",e.id),t.dataTransfer.effectAllowed="move"},L=()=>{E(null),A(null)};return(0,r.jsxs)("div",{className:"flex h-full flex-col space-y-6",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"font-headline text-2xl",children:"Planificator Task-uri"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Organizează-ți activitățile zilnice cu acest panou Kanban."})]}),(0,r.jsxs)(m.$,{onClick:()=>{f(null),_.reset({title:"",goal:"",deadline:void 0,status:"todo"}),o(!0)},children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Adaugă Task"]})]}),(0,r.jsx)("div",{className:"grid flex-1 grid-cols-1 items-start gap-6 md:grid-cols-3",children:U.map(e=>(0,r.jsxs)(p.Zp,{className:"flex h-full flex-col bg-muted/50",onDragOver:t=>{t.preventDefault(),A(e)},onDrop:r=>((e,r)=>{r.preventDefault();let s=R||r.dataTransfer.getData("text/plain");if(!s)return;let n=t.find(e=>e.id===s);if(!n||n.status===e)return void L();let l={...n,status:e};a(e=>e.map(e=>e.id===n.id?l:e)),L(),F(l,e,n)})(e,r),children:[(0,r.jsx)(p.aR,{children:(0,r.jsx)(p.ZB,{children:C[e].title})}),(0,r.jsx)(p.Wu,{className:(0,k.cn)("flex flex-col gap-4",z===e&&"bg-muted/70"),children:v?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Se \xeencarcă..."}):t.filter(t=>t.status===e).map(e=>(0,r.jsx)(S,{task:e,onEdit:M,onDelete:J,onDragStart:B,onDragEnd:L,isDragging:R===e.id},e.id))})]},e))}),(0,r.jsx)(x.lG,{open:l,onOpenChange:o,children:(0,r.jsxs)(x.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(x.c7,{children:[(0,r.jsx)(x.L3,{children:c?"Editează Task":"Creează Task Nou"}),(0,r.jsx)(x.rr,{children:"Completează detaliile de mai jos pentru task-ul tău."})]}),(0,r.jsx)(g.lV,{..._,children:(0,r.jsxs)("form",{onSubmit:_.handleSubmit(O),className:"space-y-4 py-4",children:[(0,r.jsx)(g.zB,{control:_.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Titlu Task"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(h.p,{placeholder:"Ex: Trimite oferta către client",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:_.control,name:"goal",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Scop (Opțional)"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(y.T,{placeholder:"Descrie pe scurt obiectivul acestui task...",...t})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:_.control,name:"deadline",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Termen limită (Opțional)"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(h.p,{type:"date",...t,value:t.value instanceof Date?(0,u.GP)(t.value,"yyyy-MM-dd"):t.value||""})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:_.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Status"}),(0,r.jsxs)(b.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(b.bq,{children:(0,r.jsx)(b.yv,{placeholder:"Selectează un status"})})}),(0,r.jsx)(b.gC,{children:U.map(e=>(0,r.jsx)(b.eb,{value:e,children:C[e].title},e))})]}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(x.Es,{children:(0,r.jsx)(m.$,{type:"submit",children:"Salvează Task"})})]})})]})})]})}function S(e){let{task:t,onEdit:a,onDelete:s,onDragStart:n,onDragEnd:i,isDragging:d}=e;return(0,r.jsx)(p.Zp,{className:(0,k.cn)("group bg-card cursor-grab active:cursor-grabbing",d&&"opacity-60"),draggable:!0,onDragStart:e=>n(t,e),onDragEnd:i,children:(0,r.jsxs)(p.Wu,{className:"relative p-4",children:[(0,r.jsx)("div",{className:"absolute right-2 top-2",children:(0,r.jsxs)(w.rI,{children:[(0,r.jsx)(w.ty,{asChild:!0,children:(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-50 group-hover:opacity-100",children:(0,r.jsx)(l,{className:"h-4 w-4"})})}),(0,r.jsxs)(w.SQ,{align:"end",children:[(0,r.jsx)(w._2,{onClick:()=>a(t),children:"Editează"}),(0,r.jsx)(w._2,{onClick:()=>s(t.id),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:"Șterge"})]})]})}),(0,r.jsx)("p",{className:"pr-6 text-sm font-semibold",children:t.title}),t.goal&&(0,r.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:t.goal}),t.deadline&&(0,r.jsxs)(v.E,{variant:"outline",className:"mt-2 text-xs",children:[(0,r.jsx)(o.A,{className:"mr-1 h-3 w-3"}),(0,u.GP)(t.deadline,"d MMM",{locale:f.ro})]})]})})}}},e=>{e.O(0,[4909,5049,2034,6625,3780,7443,9864,2969,2201,2792,8441,1255,7358],()=>e(e.s=58436)),_N_E=e.O()}]);