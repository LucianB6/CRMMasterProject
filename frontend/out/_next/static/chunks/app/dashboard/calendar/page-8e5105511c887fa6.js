(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(95155),s=r(12115),n=r(17129),i=r(92885),l=r(64269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},13406:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var a=r(95155),s=r(12115),n=r(84964),i=r(64269);let l=n.bL,o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});o.displayName=n.B8.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});d.displayName=n.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=n.UC.displayName},15894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var a=r(12115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function c(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},41052:(e,t,r)=>{"use strict";r.d(t,{C5:()=>g,MJ:()=>h,Rr:()=>v,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>u});var a=r(95155),s=r(12115),n=r(17129),i=r(22544),l=r(64269),o=r(76444);let d=i.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(i.xI,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:r,formState:a}=(0,i.xW)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...n}=e,i=s.useId();return(0,a.jsx)(f.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...n})})});p.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:i}=m();return(0,a.jsx)(o.J,{ref:t,className:(0,l.cn)(n&&"text-destructive",r),htmlFor:i,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,a.jsx)(n.DX,{ref:t,id:i,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...r})});h.displayName="FormControl";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=m();return(0,a.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});v.displayName="FormDescription";let g=s.forwardRef((e,t)=>{var r;let{className:s,children:n,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!=(r=null==o?void 0:o.message)?r:""):n;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",s),...i,children:c}):null});g.displayName="FormMessage"},51834:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>m,Es:()=>p,L3:()=>x,c7:()=>f,lG:()=>o,rr:()=>h,zM:()=>d});var a=r(95155),s=r(12115),n=r(82969),i=r(65229),l=r(64269);let o=n.bL,d=n.l9,c=n.ZL;n.bm;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=n.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[s,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=n.hE.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.VY.displayName},54388:(e,t,r)=>{Promise.resolve().then(r.bind(r,89119))},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},65142:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(95155),s=r(12115),n=r(64269);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},76444:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var a=r(95155),s=r(12115),n=r(32894),i=r(64269);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none",r),...s})});l.displayName=n.b.displayName},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=r(95155),s=r(12115),n=r(64269);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},89119:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(95155),s=r(12115),n=r(3617),i=r(39089),l=r(63146),o=r(90231),d=r(79894),c=r(8773),u=r(73181),m=r(51909),f=r(41962),p=r(64480),x=r(19056),h=r(28638),v=r(55350),g=r(29854),y=r(48633),b=r(66942),w=r(6191),j=r(90368),N=r(27937),T=r(22544),M=r(15653),E=r(3998),S=r(86948),k=r(51834),C=r(41052),P=r(65142),R=r(13406),z=r(15894),_=r(90960),A=r(64269);let O=M.Ik({title:M.Yj().min(1,"Motivul este obligatoriu."),startTime:M.Yj().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9](?::[0-5][0-9])?$/,{message:"Format oră invalid (HH:mm)."}),endTime:M.Yj().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9](?::[0-5][0-9])?$/,{message:"Format oră invalid (HH:mm)."})}).refine(e=>e.startTime<e.endTime,{message:"Ora de sf\xe2rșit trebuie să fie după ora de \xeenceput.",path:["endTime"]}),D=e=>e?e.length>=5?e.slice(0,5):e:"",I=e=>{if(!e)return 0;let[t,r]=e.split(":").map(Number);return 60*t+r},L=e=>{let t=Math.max(0,Math.min(1440,e)),r=Math.floor(t/60);return"".concat(r.toString().padStart(2,"0"),":").concat((t%60).toString().padStart(2,"0"))};function G(){let{toast:e}=(0,z.dj)(),[t,r]=(0,s.useState)(new Date),[M,G]=(0,s.useState)([]),[F,B]=(0,s.useState)(!1),[J,U]=(0,s.useState)(null),[Y,V]=(0,s.useState)(null),[$,X]=(0,s.useState)("month"),[H,W]=(0,s.useState)(!0),[Z,q]=(0,s.useState)(!1),[Q,K]=(0,s.useState)(null),[ee,et]=(0,s.useState)(64),er=(0,s.useRef)(null),ea=(0,s.useRef)(null),es=(0,s.useRef)(null),en=(0,s.useCallback)(()=>window.localStorage.getItem("salesway_token"),[]);(0,s.useEffect)(()=>{let e=()=>{et(window.innerWidth<640?48:64)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let ei=(0,T.mN)({resolver:(0,b.u)(O),defaultValues:{title:"",startTime:"",endTime:""}}),el=(0,s.useMemo)(()=>{if("month"===$)return(0,n.GP)(t,"MMMM yyyy",{locale:y.ro});let e=(0,i.k)(t,{weekStartsOn:1}),r=(0,l.$)(t,{weekStartsOn:1});return(0,n.GP)(e,"yyyy")!==(0,n.GP)(r,"yyyy")?"".concat((0,n.GP)(e,"d MMMM yyyy",{locale:y.ro})," - ").concat((0,n.GP)(r,"d MMMM yyyy",{locale:y.ro})):(0,n.GP)(e,"MMMM",{locale:y.ro})!==(0,n.GP)(r,"MMMM",{locale:y.ro})?"".concat((0,n.GP)(e,"d MMMM",{locale:y.ro})," - ").concat((0,n.GP)(r,"d MMMM yyyy",{locale:y.ro})):"".concat((0,n.GP)(e,"d")," - ").concat((0,n.GP)(r,"d MMMM yyyy",{locale:y.ro}))},[t,$]),eo=(0,s.useMemo)(()=>{if("month"===$){let e=(0,o.w)(t),r=(0,d.p)(t),a=(0,i.k)(e,{weekStartsOn:1}),s=(0,l.$)(r,{weekStartsOn:1});return(0,c.k)({start:a,end:s})}let e=(0,i.k)(t,{weekStartsOn:1}),r=(0,l.$)(t,{weekStartsOn:1});return(0,c.k)({start:e,end:r})},[t,$]),ed=e=>{V(null),U(e),B(!0),ei.reset({title:"",startTime:"",endTime:""})},ec=(e,t)=>{if(t.stopPropagation(),es.current===e.id){es.current=null;return}V(e.id),U(e.date),B(!0),ei.reset({title:e.title,startTime:D(e.startTime),endTime:D(e.endTime)})},eu=(0,s.useCallback)(e=>({id:e.id,date:(0,x.H)(e.event_date),title:e.title,startTime:e.start_time,endTime:e.end_time}),[]),em=(0,s.useCallback)(e=>(0,n.GP)(e,"yyyy-MM-dd"),[]),ef=(0,s.useCallback)(async(t,r)=>{try{W(!0);let e=en(),a=await (0,_.nr)("/calendar/events?from=".concat(em(t),"&to=").concat(em(r)),{headers:e?{Authorization:"Bearer ".concat(e)}:void 0});G(a.map(eu))}catch(t){e({title:"Nu am putut \xeencărca evenimentele",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}finally{W(!1)}},[em,en,eu,e]),ep=(0,s.useCallback)(e=>{G(t=>{let r=t.findIndex(t=>t.id===e.id);if(-1===r)return[...t,e].sort((e,t)=>e.date.getTime()===t.date.getTime()?e.startTime.localeCompare(t.startTime):e.date.getTime()-t.date.getTime());let a=[...t];return a[r]=e,a})},[]);async function ex(t){if(J)try{let r=en(),a=!!Y,s=eu(await (0,_.nr)(a?"/calendar/events/".concat(Y):"/calendar/events",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}},body:JSON.stringify({...a?{id:Y}:{},title:t.title,event_date:em(J),start_time:D(t.startTime),end_time:D(t.endTime)})}));ep(s),e({title:a?"Eveniment actualizat":"Eveniment adăugat",description:'Evenimentul "'.concat(t.title,'" a fost ').concat(a?"actualizat":"adăugat"," pe ").concat((0,n.GP)(J,"dd MMMM yyyy",{locale:y.ro})," \xeentre orele ").concat(t.startTime," - ").concat(t.endTime,".")}),B(!1),V(null)}catch(t){e({title:"Nu am putut salva evenimentul",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}}let eh=Array.from({length:24},(e,t)=>t),ev=e=>{let[t,r]=e.split(":").map(Number);return t*ee+r/60*ee},eg=(e,t,r,a)=>{let s=er.current;if(!s)return;let n=s.getBoundingClientRect(),i=n.width/7,l=I(e.startTime),o=Math.max(15,I(e.endTime)-l),d=r-(n.top+ev(e.startTime));ea.current={event:e,date:t,columnTop:n.top,gridLeft:n.left,columnWidth:i,offsetY:d,durationMinutes:o,startClientY:r,previewStart:L(l),previewEnd:L(l+o),previewDate:t,hasMoved:!1},q(!0),K({id:e.id,date:t,startTime:L(l),endTime:L(l+o),title:e.title})},ey=(0,s.useCallback)((e,t)=>{var r;let a=ea.current;if(!a)return;let s=15*Math.round((e-a.columnTop-a.offsetY)/ee*60/15),n=Math.max(0,Math.min(1440-a.durationMinutes,s)),i=null!=(r=eo[Math.min(6,Math.max(0,Math.floor((t-a.gridLeft)/a.columnWidth)))])?r:a.previewDate,l=L(n),o=L(n+a.durationMinutes),d=Math.abs(e-a.startClientY)>3;l!==a.previewStart||o!==a.previewEnd||i.getTime()!==a.previewDate.getTime()?(ea.current={...a,previewStart:l,previewEnd:o,previewDate:i,hasMoved:a.hasMoved||d},K({id:a.event.id,date:i,startTime:l,endTime:o,title:a.event.title})):d&&!a.hasMoved&&(ea.current={...a,hasMoved:!0})},[eo,ee]),eb=(0,s.useCallback)(async()=>{let t=ea.current;if(!t)return;if(ea.current=null,q(!1),!t.hasMoved)return void K(null);let r={...t.event,date:t.previewDate,startTime:t.previewStart,endTime:t.previewEnd};K(null),es.current=r.id,setTimeout(()=>{es.current===r.id&&(es.current=null)},0);let a=t.event;ep(r);try{let t=en(),a=eu(await (0,_.nr)("/calendar/events/".concat(r.id),{method:"PUT",headers:{"Content-Type":"application/json",...t?{Authorization:"Bearer ".concat(t)}:{}},body:JSON.stringify({id:r.id,title:r.title,event_date:em(r.date),start_time:D(r.startTime),end_time:D(r.endTime)})}));ep(a),e({title:"Eveniment actualizat",description:'Evenimentul "'.concat(a.title,'" a fost mutat la ').concat(a.startTime," - ").concat(a.endTime,".")})}catch(t){ep(a),e({title:"Nu am putut actualiza evenimentul",description:t instanceof Error?t.message:"Eroare necunoscută",variant:"destructive"})}},[em,en,eu,e,ep]),ew=e=>M.filter(t=>(0,h.r)(t.date,e)).sort((e,t)=>e.startTime.localeCompare(t.startTime));return(0,s.useEffect)(()=>{eo.length&&ef(eo[0],eo[eo.length-1])},[eo,ef]),(0,s.useEffect)(()=>{if(!Z)return;let e=e=>{ey(e.clientY,e.clientX)},t=()=>{eb()},r=e=>{e.touches[0]&&(e.preventDefault(),ey(e.touches[0].clientY,e.touches[0].clientX))},a=()=>{eb()};return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",a),window.addEventListener("touchcancel",a),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",a),window.removeEventListener("touchcancel",a)}},[eb,ey,Z]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-headline text-2xl",children:"Calendar"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Vezi și adaugă evenimente \xeen calendarul tău."})]}),(0,a.jsxs)(E.$,{onClick:()=>ed(new Date),children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"})," Adaugă Eveniment"]})]}),(0,a.jsxs)(S.Zp,{children:[(0,a.jsxs)(S.aR,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)(S.ZB,{className:"font-headline text-xl capitalize",children:el}),(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 sm:w-auto",children:[(0,a.jsx)(R.tU,{value:$,onValueChange:e=>X(e),className:"flex-grow sm:flex-grow-0",children:(0,a.jsxs)(R.j7,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(R.Xi,{value:"month",children:"Lună"}),(0,a.jsx)(R.Xi,{value:"week",children:"Săptăm\xe2nă"})]})}),(0,a.jsxs)(E.$,{variant:"outline",size:"icon",onClick:()=>{"month"===$?r((0,u.a)(t,1)):r((0,m.k)(t,1))},children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Perioada precedentă"})]}),(0,a.jsxs)(E.$,{variant:"outline",size:"icon",onClick:()=>{"month"===$?r((0,f.P)(t,1)):r((0,p.J)(t,1))},children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Perioada următoare"})]})]})]}),(0,a.jsxs)(S.Wu,{className:(0,A.cn)("week"===$&&"p-0"),children:["month"===$&&(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-px border-l border-t border-border bg-border",children:[["Luni","Marți","Miercuri","Joi","Vineri","S\xe2mbătă","Duminică"].map(e=>(0,a.jsxs)("div",{className:"bg-card p-1 text-center text-xs font-medium capitalize text-muted-foreground sm:p-2 sm:text-sm",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:e.substring(0,3)}),(0,a.jsx)("span",{className:"sm:hidden",children:e.substring(0,1)})]},e)),eo.map(e=>{let r=ew(e);return(0,a.jsxs)("div",{className:(0,A.cn)("relative min-h-[100px] cursor-pointer bg-card p-1 transition-colors hover:bg-muted/50 sm:min-h-[120px] sm:p-2",!(0,v.t)(e,t)&&"bg-muted/50 text-muted-foreground"),onClick:()=>ed(e),children:[(0,a.jsx)("time",{dateTime:(0,n.GP)(e,"yyyy-MM-dd"),className:(0,A.cn)("absolute right-1 top-1 flex h-6 w-6 items-center justify-center rounded-full text-sm sm:right-2 sm:top-2",(0,g.c)(e)&&"bg-primary text-primary-foreground"),children:(0,n.GP)(e,"d")}),(0,a.jsxs)("div",{className:"mt-7 space-y-1 sm:mt-8",children:[r.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{className:"overflow-hidden rounded-md bg-accent p-1 px-1.5 text-xs text-accent-foreground sm:px-2",onClick:t=>ec(e,t),children:[(0,a.jsx)("div",{className:"font-semibold",children:"".concat(e.startTime)}),(0,a.jsx)("div",{className:"truncate",children:e.title})]},e.id)),H&&0===r.length&&(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Se \xeencarcă..."})]})]},e.toString())})]}),"week"===$&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex w-14 flex-col",children:[(0,a.jsx)("div",{className:"h-[65px] border-r sm:h-[69px]",children:"\xa0"}),eh.map(e=>(0,a.jsx)("div",{className:"shrink-0 border-r pt-1 text-center",style:{height:"".concat(ee,"px")},children:(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e,":00"]})},e))]}),(0,a.jsxs)("div",{className:"flex-1 overflow-x-hidden",children:[(0,a.jsx)("div",{className:"sticky top-0 z-20 grid grid-cols-7 bg-background",children:eo.map(e=>(0,a.jsxs)("div",{className:"border-b border-l p-1 text-center sm:p-2",children:[(0,a.jsx)("p",{className:"hidden text-sm capitalize text-muted-foreground sm:block",children:(0,n.GP)(e,"E",{locale:y.ro})}),(0,a.jsx)("p",{className:"text-sm capitalize text-muted-foreground sm:hidden",children:(0,n.GP)(e,"EEEEE",{locale:y.ro})}),(0,a.jsx)("p",{className:(0,A.cn)("text-lg font-semibold sm:text-xl",(0,g.c)(e)&&"text-primary"),children:(0,n.GP)(e,"d")})]},e.toString()))}),(0,a.jsx)("div",{className:"grid grid-cols-7",ref:er,children:eo.map((e,t)=>(0,a.jsxs)("div",{className:(0,A.cn)("relative h-full w-full border-l",(0,g.c)(e)&&"bg-primary/5"),onClick:()=>ed(e),children:[eh.map(e=>(0,a.jsx)("div",{className:"border-b",style:{height:"".concat(ee,"px")}},e)),(()=>{let t=ew(e).filter(e=>!Q||Q.id!==e.id);return Q&&(0,h.r)(Q.date,e)?[...t,{id:Q.id,date:Q.date,title:Q.title,startTime:Q.startTime,endTime:Q.endTime}]:t})().map(t=>{var r,s;let n=Q&&Q.id===t.id?Q:null,i=null!=(r=null==n?void 0:n.startTime)?r:t.startTime,l=null!=(s=null==n?void 0:n.endTime)?s:t.endTime,o=ev(i),d=ev(l)-ev(i);return(0,a.jsxs)("div",{className:(0,A.cn)("absolute z-10 w-full cursor-grab overflow-hidden rounded-md border bg-primary/80 p-1 text-xs text-primary-foreground shadow-md backdrop-blur-sm active:cursor-grabbing sm:p-2",n&&"opacity-90"),style:{top:"".concat(o,"px"),height:"".concat(Math.max(d,24),"px"),left:"2px",right:"2px",width:"calc(100% - 4px)"},onClick:e=>ec(t,e),onMouseDown:r=>{r.stopPropagation(),r.preventDefault(),eg(t,e,r.clientY,r.currentTarget)},onTouchStart:r=>{r.stopPropagation();let a=r.touches[0];a&&eg(t,e,a.clientY,r.currentTarget)},children:[(0,a.jsx)("p",{className:"truncate font-semibold",children:t.title}),(0,a.jsx)("p",{className:"truncate",children:"".concat(i," - ").concat(l)})]},t.id)})]},t))})]})]})]})]}),(0,a.jsx)(k.lG,{open:F,onOpenChange:B,children:(0,a.jsxs)(k.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(k.c7,{children:[(0,a.jsx)(k.L3,{children:Y?"Editează eveniment":"Adaugă eveniment nou"}),(0,a.jsx)(k.rr,{children:J&&"Adaugă un eveniment pentru data de ".concat((0,n.GP)(J,"dd MMMM yyyy",{locale:y.ro}),".")})]}),(0,a.jsx)(C.lV,{...ei,children:(0,a.jsxs)("form",{onSubmit:ei.handleSubmit(ex),className:"space-y-4 py-4",children:[(0,a.jsx)(C.zB,{control:ei.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(C.eI,{children:[(0,a.jsx)(C.lR,{children:"Motivul"}),(0,a.jsx)(C.MJ,{children:(0,a.jsx)(P.p,{placeholder:"Ex: \xcent\xe2lnire de v\xe2nzări",...t})}),(0,a.jsx)(C.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(C.zB,{control:ei.control,name:"startTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(C.eI,{children:[(0,a.jsx)(C.lR,{children:"Ora de \xeenceput"}),(0,a.jsx)(C.MJ,{children:(0,a.jsx)(P.p,{type:"time",...t})}),(0,a.jsx)(C.C5,{})]})}}),(0,a.jsx)(C.zB,{control:ei.control,name:"endTime",render:e=>{let{field:t}=e;return(0,a.jsxs)(C.eI,{children:[(0,a.jsx)(C.lR,{children:"Ora de sf\xe2rșit"}),(0,a.jsx)(C.MJ,{children:(0,a.jsx)(P.p,{type:"time",...t})}),(0,a.jsx)(C.C5,{})]})}})]}),(0,a.jsx)(k.Es,{children:(0,a.jsx)(E.$,{type:"submit",children:"Salvează Eveniment"})})]})})]})})]})}},90960:(e,t,r)=>{"use strict";r.d(t,{JR:()=>a,hD:()=>s,nr:()=>i,rP:()=>n});let a="http://localhost:8080";if(!a)throw Error("NEXT_PUBLIC_API_BASE_URL is not set.");class s extends Error{constructor(e,t,r){super(t),this.name="ApiError",this.status=e,this.body=r}}let n=async function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("http://")||e.startsWith("https://")?e:new URL(e.startsWith("/")?e:"/".concat(e),a).toString(),n=new Headers(null!=(t=r.headers)?t:{});return r.body&&"string"==typeof r.body&&!n.has("Content-Type")&&n.set("Content-Type","application/json"),fetch(s,{...r,headers:n})},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await n(e,t),a=await r.text();if(!r.ok){var i;throw new s(r.status,(i=r.status,401===i?"Unauthorized (401). Please sign in.":403===i?"Forbidden (403).":404===i?"Not Found (404).":i>=500?"Server error. Please try again later.":a||"Request failed (status ".concat(i,").")),a)}return a?JSON.parse(a):null}}},e=>{e.O(0,[4909,5049,2034,9864,2969,4964,2201,8647,8441,1255,7358],()=>e(e.s=54388)),_N_E=e.O()}]);