(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8205],{11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>u});var s=a(95155),r=a(12115),l=a(20154),n=a(24033),i=a(12108),o=a(5917),d=a(64269);let c=l.bL;l.YJ;let u=l.WT,m=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});x.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});h.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},13406:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>i});var s=a(95155),r=a(12115),l=a(84964),n=a(64269);let i=l.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=l.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});d.displayName=l.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=l.UC.displayName},15894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),i.forEach(e=>{e(o)})}function c(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},62553:(e,t,a)=>{Promise.resolve().then(a.bind(a,79642))},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},79642:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(95155),r=a(12115),l=a(26265),n=a(27105),i=a(68425),o=a(47734),d=a(73697),c=a(33420),u=a(37665),m=a(73804),f=a(69141),p=a(30814),x=a(1524),h=a(91761),j=a(86948),g=a(11186),v=a(13406),y=a(15894),w=a(90960);function N(){let{toast:e}=(0,y.dj)(),[t,a]=(0,r.useState)("all"),[N,b]=(0,r.useState)("month"),[S,T]=(0,r.useState)([]),[C,_]=(0,r.useState)(null),[A,R]=(0,r.useState)([]),[U,E]=(0,r.useState)([]),[D,k]=(0,r.useState)(!0),z=(0,r.useCallback)(()=>window.localStorage.getItem("salesway_token"),[]),O=(0,r.useCallback)(e=>{let t=new Date,a=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));"year"===e?a.setUTCDate(a.getUTCDate()-364):a.setUTCDate(a.getUTCDate()-29);let s=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())).toISOString().slice(0,10);return{from:a.toISOString().slice(0,10),to:s}},[]),I=(0,r.useCallback)(e=>{let t=new Date(e);return Number.isNaN(t.getTime())?e:new Intl.DateTimeFormat("ro-RO",{weekday:"short",day:"2-digit",month:"short"}).format(t)},[]),P=(0,r.useMemo)(()=>{let e=e=>null!=e?e:0;return{calls:e(null==C?void 0:C.outbound_dials),conversions:e(null==C?void 0:C.sales_call_on_calendar),sales:e(null==C?void 0:C.total_sales),value:e(null==C?void 0:C.contract_value)}},[C]),B=(0,r.useMemo)(()=>"all"===t?A:U,[U,t,A]);return(0,r.useEffect)(()=>{(async()=>{try{let e=z(),t=await (0,w.nr)("/manager/overview/agents",{headers:e?{Authorization:"Bearer ".concat(e)}:void 0});T(t)}catch(t){e({title:"Eroare",description:t instanceof Error?t.message:"Nu am putut \xeencărca agenții.",variant:"destructive"})}})()},[z,e]),(0,r.useEffect)(()=>{(async()=>{try{k(!0);let e=z(),a=e?{Authorization:"Bearer ".concat(e)}:void 0,{from:s,to:r}=O(N),l="all"===t?"/manager/overview/summary?from=".concat(s,"&to=").concat(r):"/manager/overview/agents/".concat(t,"/summary?from=").concat(s,"&to=").concat(r),n=await (0,w.nr)(l,{headers:a});if(_(n),"all"===t){let e=(await (0,w.nr)("/manager/overview/team-performance?from=".concat(s,"&to=").concat(r),{headers:a})).map(e=>{var t,a;return{day:I(e.report_date),calls:null!=(t=e.outbound_dials)?t:0,sales:null!=(a=e.total_sales)?a:0}});R(e)}else{let e=(await (0,w.nr)("/manager/reports?from=".concat(s,"&to=").concat(r,"&agent_membership_id=").concat(t),{headers:a})).map(e=>{var t,a,s,r;let l=(null!=(t=e.inputs.sales_one_call_close)?t:0)+(null!=(a=e.inputs.followup_sales)?a:0)+(null!=(s=e.inputs.upsells)?s:0);return{day:I(e.report_date),calls:null!=(r=e.inputs.outbound_dials)?r:0,sales:l}});E(e)}}catch(t){e({title:"Eroare",description:t instanceof Error?t.message:"Nu am putut \xeencărca datele de overview.",variant:"destructive"})}finally{k(!1)}})()},[O,I,z,N,t,e]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{className:"font-headline text-2xl",children:"Privire de ansamblu echipă"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Analizează performanța generală sau filtrează după un agent specific."})]}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{children:[(0,s.jsx)(j.ZB,{children:"Filtru"}),(0,s.jsx)(j.BT,{children:'Selectează "Toți Agenții" pentru a vedea date agregate sau alege un agent pentru a-i vedea performanța individuală.'})]}),(0,s.jsxs)(j.Wu,{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)(g.l6,{value:t,onValueChange:a,children:[(0,s.jsx)(g.bq,{className:"w-full sm:w-[280px]",children:(0,s.jsx)(g.yv,{placeholder:"Selectează o opțiune"})}),(0,s.jsxs)(g.gC,{children:[(0,s.jsx)(g.eb,{value:"all",children:"Toți Agenții"}),S.map(e=>(0,s.jsx)(g.eb,{value:e.membership_id,children:e.email},e.membership_id))]})]}),(0,s.jsx)(v.tU,{value:N,onValueChange:e=>b(e),children:(0,s.jsxs)(v.j7,{children:[(0,s.jsx)(v.Xi,{value:"month",children:"Ultima lună"}),(0,s.jsx)(v.Xi,{value:"year",children:"Ultimul an"})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold tracking-tight",children:["Quick Stats - ","year"===N?"ultimul an":"ultima lună"]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.ZB,{className:"text-sm font-medium",children:"Apeluri făcute"}),(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(j.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:P.calls})})]}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.ZB,{className:"text-sm font-medium",children:"Conversii"}),(0,s.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(j.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:P.conversions})})]}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.ZB,{className:"text-sm font-medium",children:"V\xe2nzări \xeenchise"}),(0,s.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(j.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:P.sales})})]}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(j.ZB,{className:"text-sm font-medium",children:"Valoare v\xe2nzări"}),(0,s.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(j.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:P.value})})]})]}),D&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Se actualizează datele..."})]}),(0,s.jsxs)(j.Zp,{children:[(0,s.jsxs)(j.aR,{children:[(0,s.jsx)(j.ZB,{children:"Performanță Echipă"}),(0,s.jsx)(j.BT,{children:"year"===N?"Ultimul an":"Ultima lună"})]}),(0,s.jsx)(j.Wu,{children:(0,s.jsxs)(v.tU,{defaultValue:"calls",children:[(0,s.jsxs)(v.j7,{className:"mb-4",children:[(0,s.jsx)(v.Xi,{value:"calls",children:"Apeluri"}),(0,s.jsx)(v.Xi,{value:"sales",children:"V\xe2nzări"})]}),(0,s.jsx)(v.av,{value:"calls",children:(0,s.jsx)(l.u,{width:"100%",height:300,children:(0,s.jsxs)(n.E,{data:B,children:[(0,s.jsx)(i.d,{strokeDasharray:"3 3",vertical:!1}),(0,s.jsx)(o.W,{dataKey:"day",stroke:"#888888",fontSize:12}),(0,s.jsx)(d.h,{stroke:"#888888",fontSize:12,allowDecimals:!1}),(0,s.jsx)(c.m,{contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))"}}),(0,s.jsx)(u.s,{iconSize:10}),(0,s.jsx)(m.yP,{dataKey:"calls",name:"Apeluri",fill:"hsl(var(--chart-1))",radius:[4,4,0,0]})]})})}),(0,s.jsx)(v.av,{value:"sales",children:(0,s.jsx)(l.u,{width:"100%",height:300,children:(0,s.jsxs)(n.E,{data:B,children:[(0,s.jsx)(i.d,{strokeDasharray:"3 3",vertical:!1}),(0,s.jsx)(o.W,{dataKey:"day",stroke:"#888888",fontSize:12}),(0,s.jsx)(d.h,{stroke:"#888888",fontSize:12,allowDecimals:!1}),(0,s.jsx)(c.m,{contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))"}}),(0,s.jsx)(u.s,{iconSize:10}),(0,s.jsx)(m.yP,{dataKey:"sales",name:"V\xe2nzări",fill:"hsl(var(--chart-2))",radius:[4,4,0,0]})]})})})]})})]})]})}},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},90960:(e,t,a)=>{"use strict";a.d(t,{JR:()=>s,hD:()=>r,nr:()=>n,rP:()=>l});let s="https://powerful-spontaneity-production.up.railway.app";if(!s)throw Error("NEXT_PUBLIC_API_BASE_URL is not set.");class r extends Error{constructor(e,t,a){super(t),this.name="ApiError",this.status=e,this.body=a}}let l=async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.startsWith("http://")||e.startsWith("https://")?e:new URL(e.startsWith("/")?e:"/".concat(e),s).toString(),l=new Headers(null!=(t=a.headers)?t:{});return a.body&&"string"==typeof a.body&&!l.has("Content-Type")&&l.set("Content-Type","application/json"),fetch(r,{...a,headers:l})},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await l(e,t),s=await a.text();if(!a.ok){var n;throw new r(a.status,(n=a.status,401===n?"Unauthorized (401). Please sign in.":403===n?"Forbidden (403).":404===n?"Not Found (404).":n>=500?"Server error. Please try again later.":s||"Request failed (status ".concat(n,").")),s)}return s?JSON.parse(s):null}}},e=>{e.O(0,[4909,2034,6625,3780,7443,1171,4964,5586,8441,1255,7358],()=>e(e.s=62553)),_N_E=e.O()}]);